class e{constructor(){this.container=null,this.mappingChangeCallback=null,this.currentOptions=null,e._ensureStyles()}render(e,t){if(this.container=e,this.currentOptions=t,!t.headers.length)return void(e.innerHTML=this._banner("No CSV loaded. Choose a file to begin."));const n=this._renderValidationStatus(t.validation),s=this._renderMappingTable(t);e.innerHTML=`\n      ${n}\n      <div class="csvm-card">\n        <div class="csvm-card-h">\n          Map your columns \n          <span class="csvm-tag">${t.rowCount} rows • sep: ${this._escape(t.dialect.separator||",")}</span>\n        </div>\n        <div class="csvm-card-b">\n          <table class="csvm-table">\n            <thead>\n              <tr>\n                <th>Your CSV header</th>\n                <th>Map to</th>\n              </tr>\n            </thead>\n            <tbody>\n              ${s}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    `,this._attachEventListeners()}onMappingChange(e){this.mappingChangeCallback=e}updateValidation(e){if(!this.container||!this.currentOptions)return;const t=this.container.querySelector(".csvm-validation-status");t&&(t.outerHTML=this._renderValidationStatus(e))}destroy(){this.container=null,this.mappingChangeCallback=null,this.currentOptions=null}showMessage(e){this.container&&(this.container.innerHTML=this._banner(e))}_renderValidationStatus(e){const{isValid:t,missingRequired:n}=e;return t?'<div class="csvm-validation-status csvm-validation-success">✓ All required columns are mapped</div>':`<div class="csvm-validation-status csvm-validation-error">\n          ⚠ Missing required columns: ${n.join(", ")}\n        </div>`}_renderMappingTable(e){return e.headers.map(t=>{const n=e.currentMapping[t]||"",s=this._generateSelectOptions(e.columnSpecs,n,e.currentMapping);return`\n        <tr>\n          <td><strong>${this._escape(t)}</strong></td>\n          <td>\n            <select data-src="${this._escape(t)}">\n              ${s}\n            </select>\n          </td>\n        </tr>\n      `}).join("")}_generateSelectOptions(e,t,n){const s=new Map;Object.values(n).forEach(e=>{e&&s.set(e,(s.get(e)||0)+1)});return['<option value="">— Ignore —</option>',...e.map(e=>{const n=s.get(e.name)||0,a=t===e.name,i=!0===e.allowDuplicates||0===n||a?"":"disabled",o=a?"selected":"",r=this._escape(e.title||e.name),l=e.allowDuplicates?" (multi)":"";return`<option value="${this._escape(e.name)}" ${o} ${i}>${r}${l}</option>`})].join("")}_attachEventListeners(){if(!this.container||!this.mappingChangeCallback)return;this.container.querySelectorAll("select[data-src]").forEach(e=>{e.addEventListener("change",()=>{const t=e.getAttribute("data-src"),n=e.value;t&&this.mappingChangeCallback&&this.mappingChangeCallback(t,n)})})}_banner(e){return`<div class="csvm-note">${this._escape(e)}</div>`}_escape(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}static _ensureStyles(){const e="csv-mapper-styles";if(document.getElementById(e))return;const t=document.createElement("style");t.id=e,t.textContent="\n      /* Light theme (default) */\n      .csvm-card { \n        border: 1px solid #ddd; \n        border-radius: 4px; \n        margin: 10px 0; \n        background: #ffffff;\n      }\n      .csvm-card-h { \n        background: #f8f9fa; \n        padding: 12px 16px; \n        border-bottom: 1px solid #ddd; \n        font-weight: 600; \n        color: #333;\n      }\n      .csvm-card-b { padding: 0; }\n      .csvm-table { \n        width: 100%; \n        border-collapse: collapse; \n        background: #ffffff;\n      }\n      .csvm-table th, .csvm-table td { \n        padding: 8px 12px; \n        text-align: left; \n        border-bottom: 1px solid #eee; \n        color: #333;\n      }\n      .csvm-table th { \n        background: #f8f9fa; \n        font-weight: 600; \n      }\n      .csvm-table select { \n        width: 100%; \n        padding: 4px 8px; \n        border: 1px solid #ccc; \n        border-radius: 3px; \n        background: #ffffff;\n        color: #333;\n      }\n      .csvm-tag { \n        background: #007cba; \n        color: white; \n        padding: 2px 6px; \n        border-radius: 3px; \n        font-size: 0.85em; \n        font-weight: normal; \n      }\n      .csvm-note { \n        padding: 12px; \n        background: #f8f9fa; \n        border: 1px solid #ddd; \n        border-radius: 4px; \n        color: #6c757d; \n      }\n      .csvm-validation-status { \n        padding: 8px 12px; \n        margin-bottom: 10px; \n        border-radius: 4px; \n        font-weight: 500; \n      }\n      .csvm-validation-success { \n        background: #d4edda; \n        border: 1px solid #c3e6cb; \n        color: #155724; \n      }\n      .csvm-validation-error { \n        background: #f8d7da; \n        border: 1px solid #f5c6cb; \n        color: #721c24; \n      }\n\n      /* Dark theme */\n      @media (prefers-color-scheme: dark) {\n        .csvm-card { \n          border: 1px solid #444; \n          background: #1e1e1e;\n        }\n        .csvm-card-h { \n          background: #2d2d2d; \n          border-bottom: 1px solid #444; \n          color: #e0e0e0;\n        }\n        .csvm-table { \n          background: #1e1e1e;\n        }\n        .csvm-table th, .csvm-table td { \n          border-bottom: 1px solid #444; \n          color: #e0e0e0;\n        }\n        .csvm-table th { \n          background: #2d2d2d; \n        }\n        .csvm-table select { \n          border: 1px solid #555; \n          background: #2d2d2d;\n          color: #e0e0e0;\n        }\n        .csvm-table select:focus {\n          border-color: #007cba;\n          outline: none;\n        }\n        .csvm-tag { \n          background: #0099e6; \n        }\n        .csvm-note { \n          background: #2d2d2d; \n          border: 1px solid #444; \n          color: #a0a0a0; \n        }\n        .csvm-validation-success { \n          background: #1e3a1e; \n          border: 1px solid #2d5a2d; \n          color: #4caf50; \n        }\n        .csvm-validation-error { \n          background: #3a1e1e; \n          border: 1px solid #5a2d2d; \n          color: #f44336; \n        }\n      }\n    ",document.head.appendChild(t)}}class t{constructor(){this.container=null,this.mappingChangeCallback=null,t._ensureStyles()}render(e,t){if(this.container=e,!t.headers.length)return void(e.innerHTML='<div class="minimal-note">No CSV loaded</div>');const{headers:n,columnSpecs:s,currentMapping:a,validation:i,rowCount:o,dialect:r}=t;e.innerHTML=`\n      <div class="minimal-mapper">\n        <div class="minimal-header">\n          <span class="minimal-title">Map ${n.length} columns</span>\n          <span class="minimal-info">${o} rows</span>\n          ${this._renderValidationBadge(i)}\n        </div>\n        \n        <div class="minimal-mappings">\n          ${n.map(e=>this._renderMappingRow(e,s,a)).join("")}\n        </div>\n      </div>\n    `,this._attachEventListeners()}onMappingChange(e){this.mappingChangeCallback=e}updateValidation(e){if(!this.container)return;const t=this.container.querySelector(".minimal-validation-badge");t&&(t.outerHTML=this._renderValidationBadge(e))}destroy(){this.container=null,this.mappingChangeCallback=null}showMessage(e){this.container&&(this.container.innerHTML=`<div class="minimal-note">${this._escape(e)}</div>`)}_renderValidationBadge(e){const{isValid:t,missingRequired:n}=e,s=t?"minimal-validation-badge valid":"minimal-validation-badge invalid",a=t?"✓":`⚠ ${n.length}`,i=t?"All required columns mapped":`Missing: ${n.join(", ")}`;return`<span class="${s}" title="${this._escape(i)}">${a}</span>`}_renderMappingRow(e,t,n){const s=n[e]||"",a=this._generateOptions(t,s);return`\n      <div class="minimal-mapping-row">\n        <span class="minimal-source">${this._escape(e)}</span>\n        <select class="minimal-select" data-src="${this._escape(e)}">\n          ${a}\n        </select>\n      </div>\n    `}_generateOptions(e,t){return['<option value="">—</option>',...e.map(e=>{const n=t===e.name?"selected":"",s=e.title||e.name;return`<option value="${this._escape(e.name)}" ${n}>${this._escape(s)}</option>`})].join("")}_attachEventListeners(){if(!this.container||!this.mappingChangeCallback)return;this.container.querySelectorAll("select[data-src]").forEach(e=>{e.addEventListener("change",()=>{const t=e.getAttribute("data-src"),n=e.value;t&&this.mappingChangeCallback&&this.mappingChangeCallback(t,n)})})}_escape(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}static _ensureStyles(){const e="minimal-ui-styles";if(document.getElementById(e))return;const t=document.createElement("style");t.id=e,t.textContent="\n      /* Light theme (default) */\n      .minimal-mapper { \n        border: 1px solid #ccc; \n        border-radius: 6px; \n        padding: 12px; \n        font-family: -apple-system, sans-serif; \n        background: #ffffff;\n      }\n      .minimal-header { \n        display: flex; \n        align-items: center; \n        gap: 8px; \n        margin-bottom: 12px; \n        padding-bottom: 8px; \n        border-bottom: 1px solid #eee; \n      }\n      .minimal-title { font-weight: 600; color: #333; }\n      .minimal-info { font-size: 0.9em; color: #666; }\n      .minimal-validation-badge { \n        padding: 2px 6px; \n        border-radius: 12px; \n        font-size: 0.8em; \n        font-weight: 500; \n      }\n      .minimal-validation-badge.valid { background: #d4edda; color: #155724; }\n      .minimal-validation-badge.invalid { background: #f8d7da; color: #721c24; }\n      .minimal-mappings { display: grid; gap: 6px; }\n      .minimal-mapping-row { \n        display: grid; \n        grid-template-columns: 1fr 1fr; \n        gap: 8px; \n        align-items: center; \n      }\n      .minimal-source { font-weight: 500; color: #333; font-size: 0.9em; }\n      .minimal-select { \n        padding: 4px 6px; \n        border: 1px solid #ccc; \n        border-radius: 3px; \n        font-size: 0.9em; \n        background: #ffffff;\n        color: #333;\n      }\n      .minimal-note { \n        padding: 8px; \n        color: #666; \n        text-align: center; \n        font-style: italic; \n      }\n\n      /* Dark theme */\n      @media (prefers-color-scheme: dark) {\n        .minimal-mapper { \n          border: 1px solid #555; \n          background: #1e1e1e;\n        }\n        .minimal-header { \n          border-bottom: 1px solid #444; \n        }\n        .minimal-title { color: #e0e0e0; }\n        .minimal-info { color: #a0a0a0; }\n        .minimal-validation-badge.valid { \n          background: #1e3a1e; \n          color: #4caf50; \n        }\n        .minimal-validation-badge.invalid { \n          background: #3a1e1e; \n          color: #f44336; \n        }\n        .minimal-source { color: #e0e0e0; }\n        .minimal-select { \n          border: 1px solid #555; \n          background: #2d2d2d;\n          color: #e0e0e0;\n        }\n        .minimal-select:focus {\n          border-color: #007cba;\n          outline: none;\n        }\n        .minimal-note { color: #a0a0a0; }\n      }\n    ",document.head.appendChild(t)}}class n extends EventTarget{constructor(t,s={}){if(super(),this.input="string"==typeof t?document.querySelector(t):t,!(this.input instanceof HTMLInputElement)||"file"!==this.input.type)throw new Error("CsvMapper: first argument must be a file input or selector.");this.opts=Object.assign({separator:"",enclosure:"",escape:"",guessMaxLines:25,outputSeparator:null,outputEnclosure:null,outputEscape:null,headers:!0,remap:!0,showUserControls:!0,mappingInput:null,controlsContainer:null,columns:[],autoThreshold:.8,allowUnmappedTargets:!0,setInputValidity:!1,uiRenderer:null,beforeParse:null,beforeMap:null,afterMap:null},s||{}),this.columns=(this.opts.columns||[]).map(e=>"string"==typeof e?{name:e}:Object.assign({},e)),this.columns.forEach(e=>{e.title||(e.title=e.name)}),this.controlsEl=this._resolveNode(this.opts.controlsContainer||null)||this._autoinsertContainer(),this.mapping={},this.headers=[],this.rows=[],this.dialect={separator:",",enclosure:'"',escape:null},this.uiRenderer=this.opts.uiRenderer||new e,this.uiRenderer.onMappingChange((e,t)=>{this.mapping[e]=t,this._onMappingChange()}),this._onFileChange=this._onFileChange.bind(this),this.input.addEventListener("change",this._onFileChange),n._ensureStyles()}destroy(){this.input.removeEventListener("change",this._onFileChange),this.controlsEl&&"1"===this.controlsEl.dataset.csvMapperAutocreated&&this.controlsEl.remove(),this.uiRenderer.destroy()}getMapping(){return Object.assign({},this.mapping)}setMapping(e){this.mapping=Object.assign({},e||{}),this.opts.showUserControls&&this._renderControls(),this._validateMapping()}getHeaders(){return[...this.headers]}getRawRows(){return this.rows.map(e=>Object.assign({},e))}getDialect(){return Object.assign({},this.dialect)}_validateMapping(){const e=this.columns.filter(e=>!0===e.required),t=new Set(Object.values(this.mapping).filter(e=>e)),n=e.filter(e=>!t.has(e.name)),s=0===n.length,a=new CustomEvent("validationChange",{detail:{isValid:s,missingRequired:n.map(e=>e.title||e.name),mappedColumns:Array.from(t)}});if(this.dispatchEvent(a),this.opts.setInputValidity){if(s)this.input.setCustomValidity("");else{const e=`Missing required columns: ${n.map(e=>e.title||e.name).join(", ")}`;this.input.setCustomValidity(e)}this.input.reportValidity()}return{isValid:s,missingRequired:n.map(e=>e.title||e.name)}}_onMappingChange(){this.opts.showUserControls&&this.controlsEl&&this._renderControls(),this._validateMapping();try{const{mappedRows:e,csv:t}=this._produceOutput(),n=new CustomEvent("afterMap",{detail:{rows:e,csv:t}});this.dispatchEvent(n),"function"==typeof this.opts.afterMap&&this.opts.afterMap(e,t);const s=this._resolveNode(this.opts.mappingInput||null);s instanceof HTMLInputElement&&(s.value=JSON.stringify(this.mapping))}catch(e){console.warn("Mapping change validation failed:",e)}}validateMapping(){const e=this._validateRequiredColumns();return{isValid:0===e.length,missingRequired:e}}async _onFileChange(){const e=this.input.files&&this.input.files[0];if(!e)return;let t=await e.text();const s=new CustomEvent("beforeParse",{detail:{text:t}});this.dispatchEvent(s),"function"==typeof this.opts.beforeParse&&(t=this.opts.beforeParse(t)??t);const a=n.parseCSV(t,{headers:this.opts.headers,separator:this.opts.separator,enclosure:this.opts.enclosure,escape:this.opts.escape,guessMaxLines:this.opts.guessMaxLines});this.headers=a.headers,this.rows=a.rows,this.dialect=a.dialect,this.mapping=Object.fromEntries(this.headers.map(e=>[e,""])),this._autoMap(),this.opts.showUserControls&&this._renderControls();const i=new CustomEvent("beforeMap",{detail:{rows:this.getRawRows()}});if(this.dispatchEvent(i),"function"==typeof this.opts.beforeMap){const e=this.opts.beforeMap(this.rows);Array.isArray(e)&&(this.rows=e)}if(this.validateMapping().isValid||!this.columns.some(e=>e.required))try{const{mappedRows:e,csv:t}=this._produceOutput(),n=new CustomEvent("afterMap",{detail:{rows:e,csv:t}});this.dispatchEvent(n),"function"==typeof this.opts.afterMap&&this.opts.afterMap(e,t)}catch(e){console.warn("Initial mapping validation failed:",e)}this._validateMapping();const o=this._resolveNode(this.opts.mappingInput||null);o instanceof HTMLInputElement&&(o.value=JSON.stringify(this.mapping))}_validateRequiredColumns(){const e=[],t=new Set(Object.values(this.mapping).filter(Boolean));for(const n of this.columns)n.required&&!t.has(n.name)&&e.push(n.name);return e}_produceOutput(){const e=this._validateRequiredColumns();if(e.length>0)throw new Error(`Required columns are not mapped: ${e.join(", ")}`);const t={};for(const[e,n]of Object.entries(this.mapping)){if(!n)continue;const s=this.columns.find(e=>e.name===n);s&&(t[n]&&!0!==s.allowDuplicates||(t[n]||(t[n]=[])).push(e))}if(!Object.values(this.mapping).some(Boolean)&&!this.columns.some(e=>e.required)){const e=this.rows.map(()=>{const e={};for(const t of this.columns)e[t.name]="";return e});let t=null;if(this.opts.remap){const s=this.opts.outputSeparator??this.dialect.separator??",",a=this.opts.outputEnclosure??this.dialect.enclosure??'"',i=this.opts.outputEscape??this.dialect.escape??null,o=this.columns.map(e=>e.title||e.name),r=[n.toCsvRow(o,s,a,i)];for(const t of e){const e=this.columns.map(e=>"");r.push(n.toCsvRow(e,s,a,i))}t=r.join("\n")}return{mappedRows:e,csv:t}}const s=this.rows.map(e=>{const s={};for(const a of this.columns){const i=t[a.name]||[];let o="";for(const t of i){const n=e[t];if(null!=n&&""!==String(n)){o=n;break}}let r=o;if(a.transform)try{r=a.transform(r,e)}catch(e){console.warn("CsvMapper transform error for",a.name,e)}if(a.validate){if(!n._validate(r,a.validate)){const e=a.validationMessage||`Validation failed for ${a.title||a.name}`;(s.__errors__||(s.__errors__=[])).push({field:a.name,message:e,value:r})}}s[a.name]=r??""}return s});let a=null;if(this.opts.remap){const e=this.opts.outputSeparator??this.dialect.separator??",",t=this.opts.outputEnclosure??this.dialect.enclosure??'"',i=this.opts.outputEscape??this.dialect.escape??null,o=this.columns.map(e=>e.title||e.name),r=[n.toCsvRow(o,e,t,i)];for(const a of s){const s=this.columns.map(e=>a[e.name]);r.push(n.toCsvRow(s,e,t,i))}a=r.join("\n")}return{mappedRows:s,csv:a}}_renderControls(){if(!this.controlsEl||!this.opts.showUserControls)return;if(!this.headers.length)return void this.uiRenderer.showMessage?.("No CSV loaded. Choose a file to begin.");const e=this._getValidationStatus(),t={headers:this.headers,columnSpecs:this.columns,currentMapping:this.mapping,validation:e,rowCount:this.rows.length,dialect:this.dialect};this.uiRenderer.render(this.controlsEl,t)}_getValidationStatus(){const e=this.columns.filter(e=>!0===e.required),t=new Set(Object.values(this.mapping).filter(e=>e)),n=e.filter(e=>!t.has(e.name));return{isValid:0===n.length,missingRequired:n.map(e=>e.title||e.name),mappedColumns:Array.from(t)}}_banner(e){return`<div class="csvm-note">${n.escape(e)}</div>`}_autoMap(){const e=new Map;for(const t of this.headers){let n="",s=0;for(const a of this.columns){const i=e.get(a.name)||0;if(!(!0===a.allowDuplicates||0===i))continue;const o=this._matchScore(t,a);o>s&&(s=o,n=a.name)}s>=this.opts.autoThreshold&&(this.mapping[t]=n,e.set(n,(e.get(n)||0)+1))}}_matchScore(e,t){const s=n.normalize(e),a=n.normalize(t.title||""),i=n.normalize(t.name||"");let o=0;if(t.match instanceof RegExp)(t.match.test(e)||t.match.test(s))&&(o=Math.max(o,1));else if("function"==typeof t.match)try{(t.match(e)||t.match(s))&&(o=Math.max(o,1))}catch(e){}return s!==i&&s!==a||(o=Math.max(o,.98)),(s.includes(i)||s.includes(a))&&(o=Math.max(o,.9)),o=Math.max(o,.85*n.similarity(s,i)),o=Math.max(o,.85*n.similarity(s,a)),o}_resolveNode(e){return e?"string"==typeof e?document.querySelector(e):e:null}_autoinsertContainer(){if(!this.opts.showUserControls)return null;const e=document.createElement("div");return e.dataset.csvMapperAutocreated="1",this.input.insertAdjacentElement("afterend",e),e}static parseCSV(e,{headers:t=!0,separator:s="",enclosure:a="",escape:i="",guessMaxLines:o=25}={}){const r=!s,l=!a,c=""===i||null==i,d=n.detectDialect(e,{separator:r?void 0:s,enclosure:l?void 0:a,escape:c?void 0:i,guessMaxLines:o}),p=d.separator||",",u=d.enclosure||'"',m=d.escape||null,h=n._parseWithDialect(e,p,u,m);if(t){const e=h.shift()||[],t=h.map(t=>Object.fromEntries(e.map((e,n)=>[e,t[n]??""])));return{headers:e,rows:t,dialect:d}}const g=h.reduce((e,t)=>Math.max(e,t.length),0),f=Array.from({length:g},(e,t)=>`Column ${t+1}`),b=h.map(e=>Object.fromEntries(f.map((t,n)=>[t,e[n]??""])));return{headers:f,rows:b,dialect:d}}static _parseWithDialect(e,t,n,s){const a=[];let i=0,o="",r=[],l=!1;for(;i<e.length;){const c=e[i];if(l){if(s&&c===s){if(e[i+1]===n){o+=n,i+=2;continue}o+=c,i++;continue}if(c===n){l=!1,i++;continue}o+=c,i++}else c!==n?c!==t?"\n"!==c?"\r"!==c?s||c!==n||e[i+1]!==n?(o+=c,i++):(o+=n,i+=2):("\n"===e[i+1]&&i++,r.push(o),a.push(r),r=[],o="",i++):(r.push(o),a.push(r),r=[],o="",i++):(r.push(o),o="",i++):(l=!0,i++)}return r.push(o),a.push(r),a.length&&1===a[a.length-1].length&&""===a[a.length-1][0]&&a.pop(),a}static detectDialect(e,{separator:t=null,enclosure:s=null,escape:a=null,guessMaxLines:i=25}={}){const o=t?[t]:[",",";","\t","|",":"],r=s?[s]:['"',"'"],l=null!=a?[a]:[null,"\\"],c=e.split(/\r\n|\n|\r/).filter(e=>e.length>0).slice(0,i);if(0===c.length)return{separator:",",enclosure:'"',escape:null};let d={score:-1/0,sep:",",quote:'"',esc:null};for(const e of o){const t="\t"===e?"\t":e;for(const e of r)for(const s of l)try{const a=n._parseWithDialect(c.join("\n"),t,e,s).map(e=>e.length),i=n._mode(a)||0,o=a.filter(e=>e===i).length,r=i<=1?50:0,l=(c[0].match(new RegExp(n._escRe(t),"g"))||[]).length,p=100*o+5*i+l-r;p>d.score&&(d={score:p,sep:t,quote:e,esc:s})}catch(e){}}return{separator:d.sep,enclosure:d.quote,escape:d.esc}}static _mode(e){const t=new Map;let n=null,s=-1;for(const a of e){const e=(t.get(a)||0)+1;t.set(a,e),e>s&&(n=a,s=e)}return n}static _escRe(e){return e.replace(/[.*+?^${}()|[\]\\]/g,e=>`\\${e}`)}static toCsvRow(e,t=",",n='"',s=null){return e.map(e=>{let a=String(e??"");const i=a.includes(t)||a.includes("\n")||a.includes("\r")||a.includes(n);return a=s?a.split(n).join(s+n):a.split(n).join(n+n),i?n+a+n:a}).join(t)}static normalize(e){return String(e||"").toLowerCase().replace(/[_\-]/g," ").replace(/\s+/g," ").trim()}static similarity(e,t){if(e=n.normalize(e),t=n.normalize(t),!e||!t)return 0;if(e===t)return 1;const s=e=>{const t=new Map;for(let n=0;n<e.length-1;n++){const s=e.slice(n,n+2);t.set(s,(t.get(s)||0)+1)}return t},a=s(e),i=s(t);let o=0,r=0;for(const[e,t]of a)i.has(e)&&(o+=Math.min(t,i.get(e))),r+=t;for(const[,e]of i)r+=e;return 2*o/(r||1)}static _validate(e,t){if(t instanceof RegExp)return t.test(String(e));if("function"==typeof t)return!!t(e);if(t&&"object"==typeof t){const n=t.type;if("number"===n){const n=Number(String(e).replace(",","."));return!Number.isNaN(n)&&(!(null!=t.min&&n<t.min)&&!(null!=t.max&&n>t.max))}if("boolean"===n){const t=String(e).trim().toLowerCase();return["1","0","true","false","yes","no","y","n",""].includes(t)}}return!0}static _ensureStyles(){if(document.getElementById("csvm-style"))return;const e=document.createElement("style");e.id="csvm-style",e.textContent="\n      .csvm-card{background:#0d1533; color:#e7ecff; border:1px solid rgba(255,255,255,.12); border-radius:12px; overflow:hidden; box-shadow:0 10px 30px rgba(0,0,0,.25)}\n      .csvm-card-h{padding:10px 12px; border-bottom:1px solid rgba(255,255,255,.12); font-weight:600; display:flex; align-items:center; gap:10px}\n      .csvm-tag{font:12px/1.2 system-ui; background:rgba(124,156,255,.18); border:1px solid rgba(124,156,255,.35); padding:2px 8px; border-radius:999px}\n      .csvm-card-b{padding:10px 12px}\n      .csvm-table{border-collapse:collapse; width:100%; font: 13px/1.4 system-ui}\n      .csvm-table th,.csvm-table td{border-bottom:1px solid rgba(255,255,255,.12); padding:8px 10px; text-align:left}\n      .csvm-table th{color:#a8b4dc}\n      .csvm-note{margin-top:8px; color:#a8b4dc}\n      .csvm-card select{background:#0b1026; color:#e7ecff; border:1px solid rgba(255,255,255,.18); border-radius:8px; padding:6px 8px}\n      .csvm-validation-error{margin-top:12px; padding:8px 12px; background:rgba(255,99,99,.1); border:1px solid rgba(255,99,99,.3); border-radius:8px; color:#ff9999; font:13px/1.4 system-ui}\n      .csvm-validation-success{margin-top:12px; padding:8px 12px; background:rgba(99,255,99,.1); border:1px solid rgba(99,255,99,.3); border-radius:8px; color:#99ff99; font:13px/1.4 system-ui}\n    ",document.head.appendChild(e)}static escape(e){return String(null==e?"":e).replace(/[&<>"']/g,e=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}[e]||e))}}export{e as DefaultUIRenderer,t as MinimalUIRenderer,n as default};
//# sourceMappingURL=csv-mapper.esm.min.js.map
