!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).CsvMapper=t()}(this,function(){"use strict";const e=e=>String(e||"").toLowerCase().replace(/[_\-]/g," ").replace(/\s+/g," ").trim(),t=e=>e.replace(/[^a-zA-Z0-9-_]+/g,"-"),n=(...e)=>{},s=n,i=n,r=n,a=n,o=n;class l{constructor(e,t,n=null){this.index=0,this.iterIndex=0,this.genIndex=0,this.index=e,this.headers=n,this.data=t,this.headers&&this._checkHeaderLength()}_checkHeaderLength(){if(this.headers){if(this.headers.length<this.data.length)throw new Error("Not enough headers for data");if(this.headers.length>this.data.length)throw new Error("Too many headers for data")}}get(e){if("number"==typeof e)return this.data[e]??null;if(!this.headers)throw new Error(`Cannot get header "${e}" by name without headers`);const t=[];return this.headers.forEach((n,s)=>{e===n&&t.push(this.data[s])}),0===t.length?null:1===t.length?t[0]:t}set(e,t){if("number"==typeof e)this.data[e]=t;else{if(!this.headers)throw new Error(`Cannot set header "${e}" by name without headers`);this.headers.forEach((n,s)=>{e===n&&(this.data[s]=t)})}return this}[Symbol.iterator](){return this}next(){return this.iterIndex<this.data.length?{value:this.data[this.iterIndex++],done:!1}:{done:!0,value:void 0}}return(e){return this.iterIndex=0,{done:!0,value:e}}throw(e){return this.iterIndex=0,{done:!0,value:void 0}}*entries(){let e=0;for(;e<this.data.length;)this.headers?yield[e,this.data[e],this.headers[e]]:yield[e,this.data[e],null],e++}arrange(e){if(this.headers){const t=this.headers.slice(),n=this.data.slice(),s=[];for(const i of e){const e=t.indexOf(i);if(-1===e)throw new Error(`Header "${i}" not found`);if(void 0===n[e])throw new Error(`Data at at index ${e} for header "${i}" not found`);s.push(n[e]),t.splice(e,1),n.splice(e,1)}return s}throw new Error("Headers not defined - cannot arrange")}toPlainObject(){if(!this.headers)return this.data;const e={};if(this.headers)for(const t in this.headers){const n=this.headers[t];void 0!==e[n]?Array.isArray(e[n])?e[n].push(this.data[t]??null):e[n]=[e[n],this.data[t]??null]:e[n]=this.data[t]??null}return e}}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function d(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var h={exports:{}};
/* @license
    Papa Parse
    v5.5.3
    https://github.com/mholt/PapaParse
    License: MIT
    */!function(e){e.exports=function e(){var t,n="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:{},s=!n.document&&!!n.postMessage,i=n.IS_PAPA_WORKER||!1,r={},a=0,o={};function l(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(e){var t=y(e);t.chunkSize=parseInt(t.chunkSize),e.step||e.chunk||(t.chunkSize=null),this._handle=new c(t),(this._handle.streamer=this)._config=t}.call(this,e),this.parseChunk=function(e,t){var s=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<s){let t=this._config.newline;t||(r=this._config.quoteChar||'"',t=this._handle.guessLineEndings(e,r)),e=[...e.split(t).slice(s)].join(t)}this.isFirstChunk&&b(this._config.beforeFirstChunk)&&void 0!==(r=this._config.beforeFirstChunk(e))&&(e=r),this.isFirstChunk=!1,this._halted=!1,s=this._partialLine+e;var r=(this._partialLine="",this._handle.parse(s,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(e=r.meta.cursor,this._finished||(this._partialLine=s.substring(e-this._baseIndex),this._baseIndex=e),r&&r.data&&(this._rowCount+=r.data.length),s=this._finished||this._config.preview&&this._rowCount>=this._config.preview,i)n.postMessage({results:r,workerId:o.WORKER_ID,finished:s});else if(b(this._config.chunk)&&!t){if(this._config.chunk(r,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=r=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(r.data),this._completeResults.errors=this._completeResults.errors.concat(r.errors),this._completeResults.meta=r.meta),this._completed||!s||!b(this._config.complete)||r&&r.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),s||r&&r.meta.paused||this._nextChunk(),r}this._halted=!0},this._sendError=function(e){b(this._config.error)?this._config.error(e):i&&this._config.error&&n.postMessage({workerId:o.WORKER_ID,error:e,finished:!1})}}function d(e){var t;(e=e||{}).chunkSize||(e.chunkSize=o.RemoteChunkSize),l.call(this,e),this._nextChunk=s?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(e){this._input=e,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(t=new XMLHttpRequest,this._config.withCredentials&&(t.withCredentials=this._config.withCredentials),s||(t.onload=_(this._chunkLoaded,this),t.onerror=_(this._chunkError,this)),t.open(this._config.downloadRequestBody?"POST":"GET",this._input,!s),this._config.downloadRequestHeaders){var e,n=this._config.downloadRequestHeaders;for(e in n)t.setRequestHeader(e,n[e])}var i;this._config.chunkSize&&(i=this._start+this._config.chunkSize-1,t.setRequestHeader("Range","bytes="+this._start+"-"+i));try{t.send(this._config.downloadRequestBody)}catch(e){this._chunkError(e.message)}s&&0===t.status&&this._chunkError()}},this._chunkLoaded=function(){4===t.readyState&&(t.status<200||400<=t.status?this._chunkError():(this._start+=this._config.chunkSize||t.responseText.length,this._finished=!this._config.chunkSize||this._start>=(e=>null!==(e=e.getResponseHeader("Content-Range"))?parseInt(e.substring(e.lastIndexOf("/")+1)):-1)(t),this.parseChunk(t.responseText)))},this._chunkError=function(e){e=t.statusText||e,this._sendError(new Error(e))}}function h(e){(e=e||{}).chunkSize||(e.chunkSize=o.LocalChunkSize),l.call(this,e);var t,n,s="undefined"!=typeof FileReader;this.stream=function(e){this._input=e,n=e.slice||e.webkitSlice||e.mozSlice,s?((t=new FileReader).onload=_(this._chunkLoaded,this),t.onerror=_(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var e=this._input,i=(this._config.chunkSize&&(i=Math.min(this._start+this._config.chunkSize,this._input.size),e=n.call(e,this._start,i)),t.readAsText(e,this._config.encoding));s||this._chunkLoaded({target:{result:i}})},this._chunkLoaded=function(e){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(e.target.result)},this._chunkError=function(){this._sendError(t.error)}}function u(e){var t;l.call(this,e=e||{}),this.stream=function(e){return t=e,this._nextChunk()},this._nextChunk=function(){var e,n;if(!this._finished)return e=this._config.chunkSize,t=e?(n=t.substring(0,e),t.substring(e)):(n=t,""),this._finished=!t,this.parseChunk(n)}}function p(e){l.call(this,e=e||{});var t=[],n=!0,s=!1;this.pause=function(){l.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){l.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(e){this._input=e,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){s&&1===t.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):n=!0},this._streamData=_(function(e){try{t.push("string"==typeof e?e:e.toString(this._config.encoding)),n&&(n=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(e){this._streamError(e)}},this),this._streamError=_(function(e){this._streamCleanUp(),this._sendError(e)},this),this._streamEnd=_(function(){this._streamCleanUp(),s=!0,this._streamData("")},this),this._streamCleanUp=_(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function c(e){var t,n,s,i,r=Math.pow(2,53),a=-r,l=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,d=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,h=this,u=0,p=0,c=!1,m=!1,v=[],w={data:[],errors:[],meta:{}};function _(t){return"greedy"===e.skipEmptyLines?""===t.join("").trim():1===t.length&&0===t[0].length}function C(){if(w&&s&&(E("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+o.DefaultDelimiter+"'"),s=!1),e.skipEmptyLines&&(w.data=w.data.filter(function(e){return!_(e)})),M()){if(w)if(Array.isArray(w.data[0])){for(var t=0;M()&&t<w.data.length;t++)w.data[t].forEach(h);w.data.splice(0,1)}else w.data.forEach(h);function h(t,n){b(e.transformHeader)&&(t=e.transformHeader(t,n)),v.push(t)}}function n(t,n){for(var s=e.header?{}:[],i=0;i<t.length;i++){var o=i,h=t[i];h=((t,n)=>(t=>(e.dynamicTypingFunction&&void 0===e.dynamicTyping[t]&&(e.dynamicTyping[t]=e.dynamicTypingFunction(t)),!0===(e.dynamicTyping[t]||e.dynamicTyping)))(t)?"true"===n||"TRUE"===n||"false"!==n&&"FALSE"!==n&&((e=>{if(l.test(e)&&(e=parseFloat(e),a<e&&e<r))return 1})(n)?parseFloat(n):d.test(n)?new Date(n):""===n?null:n):n)(o=e.header?i>=v.length?"__parsed_extra":v[i]:o,h=e.transform?e.transform(h,o):h),"__parsed_extra"===o?(s[o]=s[o]||[],s[o].push(h)):s[o]=h}return e.header&&(i>v.length?E("FieldMismatch","TooManyFields","Too many fields: expected "+v.length+" fields but parsed "+i,p+n):i<v.length&&E("FieldMismatch","TooFewFields","Too few fields: expected "+v.length+" fields but parsed "+i,p+n)),s}var i;w&&(e.header||e.dynamicTyping||e.transform)&&(i=1,!w.data.length||Array.isArray(w.data[0])?(w.data=w.data.map(n),i=w.data.length):w.data=n(w.data,0),e.header&&w.meta&&(w.meta.fields=v),p+=i)}function M(){return e.header&&0===v.length}function E(e,t,n,s){e={type:e,code:t,message:n},void 0!==s&&(e.row=s),w.errors.push(e)}b(e.step)&&(i=e.step,e.step=function(t){w=t,M()?C():(C(),0!==w.data.length&&(u+=t.data.length,e.preview&&u>e.preview?n.abort():(w.data=w.data[0],i(w,h))))}),this.parse=function(i,r,a){var l=e.quoteChar||'"';return e.newline||(e.newline=this.guessLineEndings(i,l)),s=!1,e.delimiter?b(e.delimiter)&&(e.delimiter=e.delimiter(i),w.meta.delimiter=e.delimiter):((l=((t,n,s,i,r)=>{var a,l,d,h;r=r||[",","\t","|",";",o.RECORD_SEP,o.UNIT_SEP];for(var u=0;u<r.length;u++){for(var p,c=r[u],f=0,m=0,v=0,w=(d=void 0,new g({comments:i,delimiter:c,newline:n,preview:10}).parse(t)),y=0;y<w.data.length;y++)s&&_(w.data[y])?v++:(m+=p=w.data[y].length,void 0===d?d=p:0<p&&(f+=Math.abs(p-d),d=p));0<w.data.length&&(m/=w.data.length-v),(void 0===l||f<=l)&&(void 0===h||h<m)&&1.99<m&&(l=f,a=c,h=m)}return{successful:!!(e.delimiter=a),bestDelimiter:a}})(i,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess)).successful?e.delimiter=l.bestDelimiter:(s=!0,e.delimiter=o.DefaultDelimiter),w.meta.delimiter=e.delimiter),l=y(e),e.preview&&e.header&&l.preview++,t=i,n=new g(l),w=n.parse(t,r,a),C(),c?{meta:{paused:!0}}:w||{meta:{paused:!1}}},this.paused=function(){return c},this.pause=function(){c=!0,n.abort(),t=b(e.chunk)?"":t.substring(n.getCharIndex())},this.resume=function(){h.streamer._halted?(c=!1,h.streamer.parseChunk(t,!0)):setTimeout(h.resume,3)},this.aborted=function(){return m},this.abort=function(){m=!0,n.abort(),w.meta.aborted=!0,b(e.complete)&&e.complete(w),t=""},this.guessLineEndings=function(e,t){e=e.substring(0,1048576),t=new RegExp(f(t)+"([^]*?)"+f(t),"gm");var n=(e=e.replace(t,"")).split("\r");if(e=1<(t=e.split("\n")).length&&t[0].length<n[0].length,1===n.length||e)return"\n";for(var s=0,i=0;i<n.length;i++)"\n"===n[i][0]&&s++;return s>=n.length/2?"\r\n":"\r"}}function f(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function g(e){var t=(e=e||{}).delimiter,n=e.newline,s=e.comments,i=e.step,r=e.preview,a=e.fastMode,l=null,d=!1,h=null==e.quoteChar?'"':e.quoteChar,u=h;if(void 0!==e.escapeChar&&(u=e.escapeChar),("string"!=typeof t||-1<o.BAD_DELIMITERS.indexOf(t))&&(t=","),s===t)throw new Error("Comment character same as delimiter");!0===s?s="#":("string"!=typeof s||-1<o.BAD_DELIMITERS.indexOf(s))&&(s=!1),"\n"!==n&&"\r"!==n&&"\r\n"!==n&&(n="\n");var p=0,c=!1;this.parse=function(o,g,m){if("string"!=typeof o)throw new Error("Input must be a string");var v=o.length,w=t.length,y=n.length,_=s.length,C=b(i),M=[],E=[],x=[],S=p=0;if(!o)return F();if(a||!1!==a&&-1===o.indexOf(h)){for(var R=o.split(n),k=0;k<R.length;k++){if(x=R[k],p+=x.length,k!==R.length-1)p+=n.length;else if(m)return F();if(!s||x.substring(0,_)!==s){if(C){if(M=[],D(x.split(t)),V(),c)return F()}else D(x.split(t));if(r&&r<=k)return M=M.slice(0,r),F(!0)}}return F()}for(var T=o.indexOf(t,p),O=o.indexOf(n,p),$=new RegExp(f(u)+f(h),"g"),A=o.indexOf(h,p);;)if(o[p]===h)for(A=p,p++;;){if(-1===(A=o.indexOf(h,A+1)))return m||E.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:M.length,index:p}),j();if(A===v-1)return j(o.substring(p,A).replace($,h));if(h===u&&o[A+1]===u)A++;else if(h===u||0===A||o[A-1]!==u){-1!==T&&T<A+1&&(T=o.indexOf(t,A+1));var q=I(-1===(O=-1!==O&&O<A+1?o.indexOf(n,A+1):O)?T:Math.min(T,O));if(o.substr(A+1+q,w)===t){x.push(o.substring(p,A).replace($,h)),o[p=A+1+q+w]!==h&&(A=o.indexOf(h,p)),T=o.indexOf(t,p),O=o.indexOf(n,p);break}if(q=I(O),o.substring(A+1+q,A+1+q+y)===n){if(x.push(o.substring(p,A).replace($,h)),L(A+1+q+y),T=o.indexOf(t,p),A=o.indexOf(h,p),C&&(V(),c))return F();if(r&&M.length>=r)return F(!0);break}E.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:M.length,index:p}),A++}}else if(s&&0===x.length&&o.substring(p,p+_)===s){if(-1===O)return F();p=O+y,O=o.indexOf(n,p),T=o.indexOf(t,p)}else if(-1!==T&&(T<O||-1===O))x.push(o.substring(p,T)),p=T+w,T=o.indexOf(t,p);else{if(-1===O)break;if(x.push(o.substring(p,O)),L(O+y),C&&(V(),c))return F();if(r&&M.length>=r)return F(!0)}return j();function D(e){M.push(e),S=p}function I(e){var t=0;return-1!==e&&(e=o.substring(A+1,e))&&""===e.trim()?e.length:t}function j(e){return m||(void 0===e&&(e=o.substring(p)),x.push(e),p=v,D(x),C&&V()),F()}function L(e){p=e,D(x),x=[],O=o.indexOf(n,p)}function F(s){if(e.header&&!g&&M.length&&!d){var i=M[0],r=Object.create(null),a=new Set(i);let t=!1;for(let n=0;n<i.length;n++){let s=i[n];if(r[s=b(e.transformHeader)?e.transformHeader(s,n):s]){let e,o=r[s];for(;e=s+"_"+o,o++,a.has(e););a.add(e),i[n]=e,r[s]++,t=!0,(l=null===l?{}:l)[e]=s}else r[s]=1,i[n]=s;a.add(s)}t&&console.warn("Duplicate headers found and renamed."),d=!0}return{data:M,errors:E,meta:{delimiter:t,linebreak:n,aborted:c,truncated:!!s,cursor:S+(g||0),renamedHeaders:l}}}function V(){i(F()),M=[],E=[]}},this.abort=function(){c=!0},this.getCharIndex=function(){return p}}function m(e){var t=e.data,n=r[t.workerId],s=!1;if(t.error)n.userError(t.error,t.file);else if(t.results&&t.results.data){var i={abort:function(){s=!0,v(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:w,resume:w};if(b(n.userStep)){for(var a=0;a<t.results.data.length&&(n.userStep({data:t.results.data[a],errors:t.results.errors,meta:t.results.meta},i),!s);a++);delete t.results}else b(n.userChunk)&&(n.userChunk(t.results,i,t.file),delete t.results)}t.finished&&!s&&v(t.workerId,t.results)}function v(e,t){var n=r[e];b(n.userComplete)&&n.userComplete(t),n.terminate(),delete r[e]}function w(){throw new Error("Not implemented.")}function y(e){if("object"!=typeof e||null===e)return e;var t,n=Array.isArray(e)?[]:{};for(t in e)n[t]=y(e[t]);return n}function _(e,t){return function(){e.apply(t,arguments)}}function b(e){return"function"==typeof e}return o.parse=function(t,s){var i=(s=s||{}).dynamicTyping||!1;if(b(i)&&(s.dynamicTypingFunction=i,i={}),s.dynamicTyping=i,s.transform=!!b(s.transform)&&s.transform,!s.worker||!o.WORKERS_SUPPORTED)return i=null,o.NODE_STREAM_INPUT,"string"==typeof t?(t=(e=>65279!==e.charCodeAt(0)?e:e.slice(1))(t),i=new(s.download?d:u)(s)):!0===t.readable&&b(t.read)&&b(t.on)?i=new p(s):(n.File&&t instanceof File||t instanceof Object)&&(i=new h(s)),i.stream(t);(i=(()=>{var t;return!!o.WORKERS_SUPPORTED&&(t=(()=>{var t=n.URL||n.webkitURL||null,s=e.toString();return o.BLOB_URL||(o.BLOB_URL=t.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",s,")();"],{type:"text/javascript"})))})(),(t=new n.Worker(t)).onmessage=m,t.id=a++,r[t.id]=t)})()).userStep=s.step,i.userChunk=s.chunk,i.userComplete=s.complete,i.userError=s.error,s.step=b(s.step),s.chunk=b(s.chunk),s.complete=b(s.complete),s.error=b(s.error),delete s.worker,i.postMessage({input:t,config:s,workerId:i.id})},o.unparse=function(e,t){var n=!1,s=!0,i=",",r="\r\n",a='"',l=a+a,d=!1,h=null,u=!1,p=((()=>{if("object"==typeof t){if("string"!=typeof t.delimiter||o.BAD_DELIMITERS.filter(function(e){return-1!==t.delimiter.indexOf(e)}).length||(i=t.delimiter),"boolean"!=typeof t.quotes&&"function"!=typeof t.quotes&&!Array.isArray(t.quotes)||(n=t.quotes),"boolean"!=typeof t.skipEmptyLines&&"string"!=typeof t.skipEmptyLines||(d=t.skipEmptyLines),"string"==typeof t.newline&&(r=t.newline),"string"==typeof t.quoteChar&&(a=t.quoteChar),"boolean"==typeof t.header&&(s=t.header),Array.isArray(t.columns)){if(0===t.columns.length)throw new Error("Option columns is empty");h=t.columns}void 0!==t.escapeChar&&(l=t.escapeChar+a),t.escapeFormulae instanceof RegExp?u=t.escapeFormulae:"boolean"==typeof t.escapeFormulae&&t.escapeFormulae&&(u=/^[=+\-@\t\r].*$/)}})(),new RegExp(f(a),"g"));if("string"==typeof e&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return c(null,e,d);if("object"==typeof e[0])return c(h||Object.keys(e[0]),e,d)}else if("object"==typeof e)return"string"==typeof e.data&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields||h),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:"object"==typeof e.data[0]?Object.keys(e.data[0]):[]),Array.isArray(e.data[0])||"object"==typeof e.data[0]||(e.data=[e.data])),c(e.fields||[],e.data||[],d);throw new Error("Unable to serialize unrecognized input");function c(e,t,n){var a="",o=("string"==typeof e&&(e=JSON.parse(e)),"string"==typeof t&&(t=JSON.parse(t)),Array.isArray(e)&&0<e.length),l=!Array.isArray(t[0]);if(o&&s){for(var d=0;d<e.length;d++)0<d&&(a+=i),a+=g(e[d],d);0<t.length&&(a+=r)}for(var h=0;h<t.length;h++){var u=(o?e:t[h]).length,p=!1,c=o?0===Object.keys(t[h]).length:0===t[h].length;if(n&&!o&&(p="greedy"===n?""===t[h].join("").trim():1===t[h].length&&0===t[h][0].length),"greedy"===n&&o){for(var f=[],m=0;m<u;m++){var v=l?e[m]:m;f.push(t[h][v])}p=""===f.join("").trim()}if(!p){for(var w=0;w<u;w++){0<w&&!c&&(a+=i);var y=o&&l?e[w]:w;a+=g(t[h][y],w)}h<t.length-1&&(!n||0<u&&!c)&&(a+=r)}}return a}function g(e,t){var s,r;return null==e?"":e.constructor===Date?JSON.stringify(e).slice(1,25):(r=!1,u&&"string"==typeof e&&u.test(e)&&(e="'"+e,r=!0),s=e.toString().replace(p,l),(r=r||!0===n||"function"==typeof n&&n(e,t)||Array.isArray(n)&&n[t]||((e,t)=>{for(var n=0;n<t.length;n++)if(-1<e.indexOf(t[n]))return!0;return!1})(s,o.BAD_DELIMITERS)||-1<s.indexOf(i)||" "===s.charAt(0)||" "===s.charAt(s.length-1))?a+s+a:s)}},o.RECORD_SEP=String.fromCharCode(30),o.UNIT_SEP=String.fromCharCode(31),o.BYTE_ORDER_MARK="\ufeff",o.BAD_DELIMITERS=["\r","\n",'"',o.BYTE_ORDER_MARK],o.WORKERS_SUPPORTED=!s&&!!n.Worker,o.NODE_STREAM_INPUT=1,o.LocalChunkSize=10485760,o.RemoteChunkSize=5242880,o.DefaultDelimiter=",",o.Parser=g,o.ParserHandle=c,o.NetworkStreamer=d,o.FileStreamer=h,o.StringStreamer=u,o.ReadableStreamStreamer=p,n.jQuery&&((t=n.jQuery).fn.parse=function(e){var s=e.config||{},i=[];return this.each(function(e){if("INPUT"!==t(this).prop("tagName").toUpperCase()||"file"!==t(this).attr("type").toLowerCase()||!n.FileReader||!this.files||0===this.files.length)return!0;for(var r=0;r<this.files.length;r++)i.push({file:this.files[r],inputElem:this,instanceConfig:t.extend({},s)})}),r(),this;function r(){if(0===i.length)b(e.complete)&&e.complete();else{var n,s,r,l,d=i[0];if(b(e.before)){var h=e.before(d.file,d.inputElem);if("object"==typeof h){if("abort"===h.action)return n="AbortError",s=d.file,r=d.inputElem,l=h.reason,void(b(e.error)&&e.error({name:n},s,r,l));if("skip"===h.action)return void a();"object"==typeof h.config&&(d.instanceConfig=t.extend(d.instanceConfig,h.config))}else if("skip"===h)return void a()}var u=d.instanceConfig.complete;d.instanceConfig.complete=function(e){b(u)&&u(e,d.file,d.inputElem),a()},o.parse(d.file,d.instanceConfig)}}function a(){i.splice(0,1),r()}}),i&&(n.onmessage=function(e){e=e.data,void 0===o.WORKER_ID&&e&&(o.WORKER_ID=e.workerId),"string"==typeof e.input?n.postMessage({workerId:o.WORKER_ID,results:o.parse(e.input,e.config),finished:!0}):(n.File&&e.input instanceof File||e.input instanceof Object)&&(e=o.parse(e.input,e.config))&&n.postMessage({workerId:o.WORKER_ID,results:e,finished:!0})}),(d.prototype=Object.create(l.prototype)).constructor=d,(h.prototype=Object.create(l.prototype)).constructor=h,(u.prototype=Object.create(u.prototype)).constructor=u,(p.prototype=Object.create(l.prototype)).constructor=p,o}()}(h);var u=d(h.exports);class p{get length(){return this.rows.length}constructor(e=[],t=null){this.index=0,this.rows=[],this.rows=e,this.headers=t}clone(){return new p(this.rows.map(e=>e.slice()),this.headers?this.headers.slice():null)}has(){return this.index<this.rows.length}current(){return new l(this.index,this.rows[this.index],this.headers)}nextRow(){return new l(this.index,this.rows[this.index++],this.headers)}[Symbol.iterator](){return this}next(){return this.has()?{done:!1,value:this.nextRow()}:{done:!0,value:void 0}}return(e){return this.rewind(),{done:!0,value:e}}throw(e){return this.rewind(),{done:!0,value:void 0}}rewind(){return this.index=0,this}map(e){const t=this.headers?this.headers.slice():null,n=this.rows.map((n,s)=>e(n,s,t));return new p(n,t)}forEach(e){const t=this.headers?this.headers.slice():null;return this.rows.forEach((n,s)=>e(n,s,t)),this}mapRows(e){const t=this.rows.map((t,n)=>e(new l(n,t,this.headers),this.headers).data);return new p(t,this.headers)}arrange(e){const t=[];for(const n of this)t.push(n.arrange(e));return new p(t,e)}toPlainObjects(){const e=[];for(const t of this)e.push(t.toPlainObject());return e}toRows(){const e=[];return this.headers&&e.push(this.headers),[...e,...this.rows]}toString(e={}){const t=this.toRows();return this.headers&&!(e.header??1)&&t.shift(),u.unparse(t,e)}addColumn(e,t=null,n=null){if(null===t&&(t="number"==typeof e?e:this.headers?.length??-1),"string"==typeof t)if(this.headers){let e=this.headers.lastIndexOf(t);if(-1===e)throw new Error(`Missing column "${t}"`);t=e+1}else t=-1;this.headers?.splice(t,0,String(e));for(const e of this.rows)e.splice(t,0,n);return this}renameColumn(e,t){return this.headers=this.headers?.map(n=>n===e?t:n)||null,this}remap(e){return e.forEach(({from:e,to:t})=>this.renameColumn(e,t)),this}remapColumns(e){return Array.isArray(e)?e.forEach(([e,t])=>{this.remapColumn(e,t)}):Object.entries(e).forEach(([e,t])=>this.remapColumn(e,t)),this}remapColumn(e,t){const n=Array.isArray(this.headers)&&this.headers.length>0,s=Array.isArray(this.rows)?this.rows.length:0,i=this.rows?.[0]?.length??(n?this.headers.length:0);if(0===i)return this;const r=Array.isArray(t)?[...t]:[t];if(0===r.length)return this;const a=(()=>{if("number"==typeof e){const t=e<0?i+e:e;if(!Number.isInteger(t)||t<0||t>=i)throw new Error(`remapColumn: index out of range: ${e}`);return[t]}if(!n)throw new Error(`remapColumn: cannot use header names without headers (got "${e}")`);const t=[];if(this.headers.forEach((n,s)=>{n===e&&t.push(s)}),0===t.length)throw new Error(`remapColumn: header not found: "${e}"`);return t})(),o=e=>Array.from({length:s},(t,n)=>this.rows?.[n]?.[e]);if(1===a.length){const e=a[0],t=o(e);n&&(this.headers[e]=r[0]);for(let e=1;e<r.length;e++){const i=r[e];n&&this.headers.push(i);for(let e=0;e<s;e++)this.rows[e].push(t[e])}return this}if(1===r.length){const e=r[0];if(n)for(const t of a)this.headers[t]=e;return this}if(r.length!==a.length)throw new Error(`remapColumn: mismatched arity (sources=${a.length}, targets=${r.length}). Use a single target name to rename all, or match lengths.`);return n&&a.forEach((e,t)=>this.headers[e]=r[t]),this}remapped(e){return this.clone().remap(e)}removeColumn(e){if("number"==typeof e)this.headers&&this.headers.splice(e,1),this.rows.forEach(t=>t.splice(e,1));else{if(!this.headers)throw new Error("Cannot remove header by name without headers present.");{let t;for(t=this.headers?.indexOf(e);void 0!==t&&t>-1;)this.removeColumn(t),t=this.headers?.indexOf(e)}}}reorderColumns(e){const t=Array.isArray(this.headers)&&this.headers.length>0,n=this.rows?.[0]?.length??(t?this.headers.length:0);if(!Array.isArray(e)||0===e.length)return this;if(0===n)return this;const s=new Map;t&&this.headers.forEach((e,t)=>{const n=s.get(e)??[];n.push(t),s.set(e,n)});const i=new Set,r=[],a=e=>{i.has(e)||(i.add(e),r.push(e))};for(const i of e)if("number"==typeof i){let e=i<0?n+i:i;if(!Number.isInteger(e)||e<0||e>=n)throw new Error(`reorderColumns: index out of range: ${i}`);a(e)}else{if(!t)throw new Error(`reorderColumns: cannot use header names without headers (got "${i}")`);const e=s.get(i);if(!e||0===e.length)throw new Error(`reorderColumns: unknown header "${i}"`);for(;e.length;)a(e.shift())}for(let e=0;e<n;e++)i.has(e)||r.push(e);return t&&(this.headers=r.map(e=>this.headers[e])),Array.isArray(this.rows)&&(this.rows=this.rows.map(e=>r.map(t=>e[t]))),this}}class c extends EventTarget{constructor(e={}){super(),this.options=Object.assign({generateCsv:!0,includeErrors:!0},e??{})}transform(e,t,n){const{isValid:s,missingRequired:i,mappedTargets:r}=this.validateRequiredMapping(t,n);if(!s)throw new Error(`Required columns are not mapped: ${i.join(", ")}`);if(0===Object.keys(t).length&&!n.some(e=>e.required))return this.handleEmptyMapping(e,t,n);const{data:o,errors:l}=this.transformRows(e,t,n);a({data:o,errors:l});let d=null;this.options.generateCsv&&(d=this.generateCsv(o));return{data:o,csv:d,validation:this.calculateValidationSummary(o,l)}}calculateValidationSummary(e,t){const n={},s={};return t.forEach(e=>{const t=e.field||"unknown";n[t]=(n[t]||0)+1,s[e.rowIndex]=(s[e.rowIndex]||0)+1}),{errors:t,totalRows:e.length,errorRows:Object.keys(s).length,totalErrors:t.length,errorsByField:n}}_invertMapping(e){const t={};for(let[n,s]of Object.entries(e)){"string"==typeof s&&(s=[s]);for(const e of s)Array.isArray(t[e])?t[e].push(n):t[e]=[n]}return t}transformRows(e,t,n){let s=0;const i=[],r=this._invertMapping(t);let a=e.clone();a.remapColumns(t);const o=n.map(e=>e.outputHeader??e.name??e.title);if(a.headers){const e=a.headers?.filter(e=>!r[e]);e.forEach(e=>a.removeColumn(e))}n.filter(e=>0===(r[e.name]||[]).length).map(e=>e.outputHeader??e.name).forEach(e=>{const t=n.find(t=>(t.outputHeader??t.name??t.title)===e);a.addColumn(e,null,t?.defaultValue??null)}),a.reorderColumns(o);const l=new Map;for(const t of a){for(const[r,a,o]of t.entries()){const d=l.get(o)??n.find(e=>(e.outputHeader??e.name??e.title)===o);if(l.set(o,d??null),!d)throw new Error(`Column spec not found for ${o}`);let h=a;if(d.transform&&"function"==typeof d.transform)try{const n={};e.headers&&e.headers.forEach(e=>{n[e]=t.get(e)||""}),h=d.transform(a,n)}catch(e){const t=e instanceof Error?e.message:String(e);this._transformationError(s,d.title||d.name,h,t);continue}if(void 0!==d.validate){const e="string"==typeof d.validate?{type:d.validate}:d.validate;if(!c.validateValue(h,e)){let n;n="object"==typeof e&&null!==e&&"type"in e?`Value "${h}" is not a valid ${e.type}`:e instanceof RegExp?`Value "${h}" does not match pattern ${e}`:"function"==typeof e?`Value "${h}" failed custom validation`:`Value "${h}" is invalid`,d.validationMessage&&(n=d.validationMessage);this._valueValidationError(s,o,h,n)&&i.push({row:t,rowIndex:s,field:o,message:n,value:h})}}t.set(r,h)}s++}return{data:a,errors:i}}generateCsv(e){return e.toString({quoteChar:this.options.quoteChar,escapeChar:this.options.escapeChar,delimiter:this.options.delimiter,newline:this.options.newline})}handleEmptyMapping(e,t,n){const s=[];for(let t=0;t<e.length;t++){const e=[];for(const t of n)e.push("");s.push(e)}const i=n.map(e=>e.outputHeader??e.name??e.title),r=new p(s,i),{data:a,errors:o}=this.transformRows(r,t,n);let l=null;this.options.generateCsv&&(l=this.generateCsv(r));return{data:a,csv:l,validation:this.calculateValidationSummary(a,o)}}validateRequiredMapping(e,t){const n=[],s=this.getAllMappedTargets(e),i=new Set(s);for(const e of t)e.required&&void 0===e.defaultValue&&!i.has(e.name)&&n.push(e.name);return{isValid:0===n.length,missingRequired:n,mappedTargets:s}}getAllMappedTargets(e){const t=new Set;return Object.values(e).forEach(e=>{"string"==typeof e?t.add(e):e.forEach(e=>t.add(e))}),Array.from(t)}static validateValue(e,t){if(null==e||""===e)return!0;if(t instanceof RegExp)return c._validateRegex(e,t);if("function"==typeof t)try{return t(e)}catch(e){return!1}if("object"==typeof t&&null!==t){const n=t;switch(n.type){case"email":return c._validateRegex(e,/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/);case"number":const t=Number(e);return!(isNaN(t)||!isFinite(t))&&(!(void 0!==n.min&&t<n.min)&&!(void 0!==n.max&&t>n.max));case"boolean":return["true","false","1","0","yes","no","y","n"].includes(String(e).toLowerCase());case"date":if(n.format){return c.dateFormatToRegex(n.format).test(String(e))}return!isNaN(Date.parse(e));case"phone":case"tel":case"telephone":return c._validateRegex(e,/^[\+]?[\d\s\-\(\)\.]{7,15}$/);case"time":return c._validateRegex(e,/^([01]?[0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?$/);case"datetime":return!isNaN(Date.parse(e));default:return!0}}return!0}static dateFormatToRegex(e,{allowSeparators:t=!0,strictLength:n=!1}={}){const s={YYYY:"\\d{4}",YY:"\\d{2}",MM:"\\d{1,2}",DD:"\\d{1,2}",HH:"\\d{1,2}",mm:"\\d{1,2}",ss:"\\d{1,2}"};n&&(s.MM="\\d{2}",s.DD="\\d{2}",s.HH="\\d{2}",s.mm="\\d{2}",s.ss="\\d{2}");let i=e;for(const[e,t]of Object.entries(s))i=i.replace(new RegExp(e,"g"),t);return t&&(i=i.replace(/[-\/\.\s:]/g,"[-\\/\\.\\s:]")),new RegExp(`^${i}$`)}static _validateRegex(e,t){return t.test(String(e))}updateOptions(e){Object.assign(this.options,e)}getOptions(){return{...this.options}}static toCsvRow(e,t=",",n='"',s=null){return e.map(e=>{const i=String(e??"");if(i.includes(t)||i.includes(n)||i.includes("\n")||i.includes("\r")){const e=s?i.replace(new RegExp(n,"g"),s+n):i.replace(new RegExp(n,"g"),n+n);return n+e+n}return i}).join(t)}_transformationError(e,t,n,s){return this.dispatchEvent(new CustomEvent("transformationError",{detail:{rowIndex:e,columnName:t,value:n,message:s}}))}_valueValidationError(e,t,n,s){const i=new CustomEvent("valueValidationError",{detail:{rowIndex:e,columnName:t,value:n,message:s}});return this.dispatchEvent(i)}}class f{static map(e,t,n="csvToConfig",s=.9,i={}){const r=n||"csvToConfig",a=new Map;if("csvToConfig"===r)for(const n of e){let e="",r=0;for(const s of t){const t=a.get(s.name)||0;if(!(!0===s.allowDuplicates||0===t))continue;const i=f.matchScore(n,s);i>r&&(r=i,e=s.name)}r>=s&&(f.addMapping(i,n,e),a.set(e,(a.get(e)||0)+1))}else for(const n of t){let t="",r=0;for(const s of e){if(!(0===(a.get(s)||0)))continue;const e=f.matchScore(s,n);e>r&&(r=e,t=s)}r>=s&&(f.addMapping(i,t,n.name),a.set(t,(a.get(t)||0)+1))}return i}static matchScore(t,n){const s=e(t),i=e(n.title||""),r=e(n.name||"");let a=0;if(n.match instanceof RegExp)(n.match.test(t)||n.match.test(s))&&(a=Math.max(a,1));else if("function"==typeof n.match)try{(n.match(t)||n.match(s))&&(a=Math.max(a,1))}catch(e){}return s!==r&&s!==i||(a=Math.max(a,.98)),(s.includes(r)||s.includes(i))&&(a=Math.max(a,.9)),a=Math.max(a,.85*f.similarity(s,r)),a=Math.max(a,.85*f.similarity(s,i)),a}static similarity(t,n){if(t=e(t),n=e(n),!t||!n)return 0;if(t===n)return 1;const s=e=>{const t=new Map;for(let n=0;n<e.length-1;n++){const s=e.slice(n,n+2);t.set(s,(t.get(s)||0)+1)}return t},i=s(t),r=s(n);let a=0,o=0;for(const[e,t]of i)r.has(e)&&(a+=Math.min(t,r.get(e))),o+=t;for(const[,e]of r)o+=e;return 2*a/(o||1)}static addMapping(e,t,n){const s=e[t];s?"string"==typeof s?s!==n&&(e[t]=[s,n]):s.includes(n)||s.push(n):e[t]=n}}class g{constructor(){this.container=null,this.mappingChangeCallback=null,this.currentOptions=null,this.hasInitialRender=!1,this.lastDrawnMap={},this.redrawHash={},g._ensureStyles(),this.uniqid=Math.random().toString(36).substring(2,10)}reset(){return this.lastDrawnMap={},this.redrawHash={},this}conditionallySetContents(e,t){e&&(e.innerHTML=t)}hashesAreEquivalent(e,t){return JSON.stringify(e)===JSON.stringify(t)}mappingModeHeaders(e){return["configToCsv"===e?"Your configured columns":"Your CSV headers","configToCsv"===e?"Map to CSV header":"Map to configured column"]}mappingModeText(e){return"configToCsv"===e?"(Config → CSV)":"(CSV → Config)"}tagText(e){return`${e.rowCount} rows • sep: ${this._escape(e.dialect.separator||",")}`}reRender(e,t){s("Re-Rendering"),this.container=e,this.currentOptions=t,e.dataset.mappingMode=t.mappingMode;const n={mappingMode:t.mappingMode,allowMultipleSelection:t.allowMultipleSelection,headers:t.headers.slice()};r(n,this.redrawHash,this.hashesAreEquivalent(this.redrawHash,n));const o=this._renderValidationMessages(t.validation),l=this.mappingModeText(t.mappingMode),[d,h]=this.mappingModeHeaders(t.mappingMode),u=this.tagText(t);e&&(this.conditionallySetContents(e.querySelector(`[id="${this.uniqid}-validation-display"]`),o),this.conditionallySetContents(e.querySelector(`[id="${this.uniqid}-mode"]`),l),this.conditionallySetContents(e.querySelector(`[id="${this.uniqid}-tag"]`),u),this.conditionallySetContents(e.querySelector(`[id="${this.uniqid}-header-left"]`),d),this.conditionallySetContents(e.querySelector(`[id="${this.uniqid}-header-right"]`),h),this.hashesAreEquivalent(this.redrawHash,n)&&this.hashesAreEquivalent(this.lastDrawnMap,t.fullMapping)?a({redrawHash:{before:this.redrawHash,after:n},lastDrawnMap:{before:this.lastDrawnMap,after:t.fullMapping}}):(this.conditionallySetContents(e.querySelector(`[id="${this.uniqid}-mapping-table-body"]`),this._renderMappingTable(t)),this._attachEventListeners())),this.redrawHash=n,this.lastDrawnMap=t.fullMapping,i("Re-Rendering")}render(e,t){if(this.hasInitialRender)return void this.reRender(e,t);if(s("Rendering"),this.container=e,this.currentOptions=t,e.dataset.mappingMode=t.mappingMode,!t.headers.length)return e.innerHTML=this._banner("No CSV loaded. Choose a file to begin."),void i("Rendering");const n=this._renderMappingTable(t),r=this._renderRequiredMappingStatus(t.mappingResult),a=this._renderValidationMessages(t.validation),o=this.mappingModeText(t.mappingMode),[l,d]=this.mappingModeHeaders(t.mappingMode),h=this.tagText(t);e.innerHTML=`\n      <div id="${this.uniqid}-mapping-display">${r}</div>\n      <div id="${this.uniqid}-validation-display">${a}</div>\n      <div class="csvm-card">\n        <div class="csvm-card-h">\n          Map your columns <span class="csvm-mapping-mode" id="${this.uniqid}-mode">${o}</span>\n          <span class="csvm-tag" id="${this.uniqid}-tag">${h}</span>\n        </div>\n        <div class="csvm-card-b">\n          <table class="csvm-table">\n            <thead>\n              <tr>\n                <th id="${this.uniqid}-header-left">${l}</th>\n                <th id="${this.uniqid}-header-right">${d}</th>\n              </tr>\n            </thead>\n            <tbody id="${this.uniqid}-mapping-table-body">\n              ${n}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    `,this._attachEventListeners(),this.hasInitialRender=!0,i("Rendering")}onMappingChange(e){this.mappingChangeCallback=e}updateMapping(e){if(!this.container||!this.currentOptions)return;const t=this.container.querySelector(".csvm-mapping-status");t&&(t.outerHTML=this._renderRequiredMappingStatus(e))}destroy(){this.container=null,this.mappingChangeCallback=null,this.currentOptions=null}showMessage(e){this.container&&(this.container.innerHTML=this._banner(e))}_renderRequiredMappingStatus(e){const{isValid:t,missingRequired:n}=e;return t?'<div class="csvm-mapping-status csvm-mapping-success">✓ All required columns are mapped</div>':`<div class="csvm-mapping-status csvm-mapping-error">\n          ⚠ Missing required columns: ${n.join(", ")}\n        </div>`}_renderValidationMessages(e){return e.errors.length<=0?"":`\n      <details class="csvm-validation-messages">\n        <summary>Validation Errors (${e.errors.length})</summary>\n        <ul>\n        ${e.errors.map(e=>`<li class="csvm-validation-error">${this._escape(e.message)}</li>`).join("")}\n        </ul>\n      </details>\n    `}_renderMappingTable(e){return a("_renderMappingTable",{options:e}),"configToCsv"===e.mappingMode?e.columnSpecs.map(n=>{let s=e.currentMapping[n.name]||"";const i=this._generateCsvHeaderOptions(e.headers,s,e.currentMapping,e.allowMultipleSelection);return this.lastDrawnMap=e.fullMapping,`\n          <tr>\n            <td><strong>${this._escape(n.title||n.name)}${n.required?" *":""}</strong></td>\n            <td>\n              <select id="${this.uniqid}-${t(n.name)}" name="${t(n.name)}" data-src="${this._escape(n.name)}">\n                ${i}\n              </select>\n            </td>\n          </tr>\n        `}).join(""):e.headers.map(n=>{const s=e.fullMapping[n]||"",i=this._generateSelectOptions(e.columnSpecs,s,e.currentMapping,e.allowMultipleSelection),r=this._getFullMappingsForHeader(n,e),a=r.length>1,o=!e.allowMultipleSelection&&a?` <span class="csvm-multiple-mappings">(+${r.length-1} more: ${r.slice(1).join(", ")})</span>`:"",l=e.allowMultipleSelection?"multiple":"",d=e.allowMultipleSelection?"csvm-multi-select":"";return this.lastDrawnMap=e.fullMapping,`\n          <tr>\n            <td><strong>${this._escape(n)}</strong></td>\n            <td>\n              <select id="${this.uniqid}-${t(n)}" name="${t(n)}" data-src="${this._escape(n)}" ${l} class="${d}">\n                ${i}\n              </select>\n              ${o}\n            </td>\n          </tr>\n        `}).join("")}_generateSelectOptions(e,t,n,s){const i=new Map;Object.values(n).forEach(e=>{e&&i.set(e,(i.get(e)||0)+1)}),"string"==typeof t&&(t=[t]);return['<option value="">— Ignore —</option>',...e.map(e=>{const n=i.get(e.name)||0,r=t.includes(e.name),a=s||!0===e.allowDuplicates||0===n||r,o=a?"":"disabled",l=r?"selected":"",d=this._escape(e.title||e.name),h=s||e.allowDuplicates?" (multi)":"",u=e.required&&a?" *":"";return`<option class="${e.required?"required":""}" value="${this._escape(e.name)}" ${l} ${o}>${d}${h}${u}</option>`})].join("")}_generateCsvHeaderOptions(e,t,n,s){a({csvHeaders:e,currentTargetHeader:t,allMappings:n});return['<option value="">— Ignore —</option>',...e.map(e=>{const i=t===e;let r="";if(!s){Object.entries(n).some(([s,i])=>i===e&&s!==Object.keys(n).find(e=>n[e]===t))&&!i&&(r="disabled")}const a=i?"selected":"",o=this._escape(e);return`<option value="${this._escape(e)}" ${a} ${r}>${o}</option>`})].join("")}_attachEventListeners(){if(!this.container||!this.mappingChangeCallback)return;a("Attaching event listeners");this.container.querySelectorAll("select[data-src]").forEach(e=>{e.addEventListener("change",()=>{let t=e.getAttribute("data-src");if(a("Select changed",{sourceHeader:t,value:e.value,selectedOptions:Array.from(e.selectedOptions).map(e=>e.value)}),"configToCsv"===this.container?.dataset.mappingMode){const n=t,s=e.value;if(!s&&n&&this.currentOptions){const e=this.currentOptions.currentMapping[n];e&&this.mappingChangeCallback&&(this.currentOptions.allowMultipleSelection?this.lastDrawnMap=this.mappingChangeCallback(`${e}|${n}`,""):this.lastDrawnMap=this.mappingChangeCallback(e,""))}else if(s&&n&&this.mappingChangeCallback){if(this.currentOptions){const e=this.currentOptions.currentMapping[n];e&&e!==s&&(this.currentOptions.allowMultipleSelection?this.lastDrawnMap=this.mappingChangeCallback(`${e}|${n}`,""):this.lastDrawnMap=this.mappingChangeCallback(e,""))}this.lastDrawnMap=this.mappingChangeCallback(s,n)}}else if(t&&this.mappingChangeCallback)if(e.multiple&&this.currentOptions?.allowMultipleSelection){const n=Array.from(e.selectedOptions).map(e=>e.value).filter(e=>e);this.lastDrawnMap=this.mappingChangeCallback(t,""),n.forEach(e=>{e&&this.mappingChangeCallback&&(this.lastDrawnMap=this.mappingChangeCallback(t,e))})}else{const n=e.value;this.lastDrawnMap=this.mappingChangeCallback(t,n??"")}})})}_banner(e){return`<div class="csvm-note">${this._escape(e)}</div>`}_escape(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}_getFullMappingsForHeader(e,t){if(!t.fullMapping||!t.fullMapping[e])return[];const n=t.fullMapping[e];return"string"==typeof n?[n]:[...n]}static _ensureStyles(){const e="csv-mapper-styles";if(document.getElementById(e))return;const t=document.createElement("style");t.id=e,t.textContent="\n      /* Light theme (default) */\n      .csvm-card {\n        border: 1px solid #ddd;\n        border-radius: 4px;\n        margin: 10px 0;\n        background: #ffffff;\n      }\n      .csvm-card-h {\n        background: #f8f9fa;\n        padding: 12px 16px;\n        border-bottom: 1px solid #ddd;\n        font-weight: 600;\n        color: #333;\n      }\n      .csvm-card-b { padding: 0; }\n      .csvm-table {\n        width: 100%;\n        border-collapse: collapse;\n        background: #ffffff;\n      }\n      .csvm-table th, .csvm-table td {\n        padding: 8px 12px;\n        text-align: left;\n        border-bottom: 1px solid #eee;\n        color: #333;\n      }\n      .csvm-table th {\n        background: #f8f9fa;\n        font-weight: 600;\n      }\n      .csvm-table select {\n        width: 100%;\n        padding: 4px 8px;\n        border: 1px solid #ccc;\n        border-radius: 3px;\n        background: #ffffff;\n        color: #333;\n      }\n      .csvm-table select.csvm-multi-select {\n        min-height: 80px;\n      }\n      .csvm-tag {\n        background: #007cba;\n        color: white;\n        padding: 2px 6px;\n        border-radius: 3px;\n        font-size: 0.85em;\n        font-weight: normal;\n      }\n      .csvm-mapping-mode {\n        background: #28a745;\n        color: white;\n        padding: 2px 6px;\n        border-radius: 3px;\n        font-size: 0.85em;\n        font-weight: normal;\n        margin-right: 8px;\n      }\n      .csvm-note {\n        padding: 12px;\n        background: #f8f9fa;\n        border: 1px solid #ddd;\n        border-radius: 4px;\n        color: #6c757d;\n      }\n      .csvm-mapping-status, .csvm-validation-messages {\n        padding: 8px 12px;\n        margin-bottom: 10px;\n        border-radius: 4px;\n        font-weight: 500;\n      }\n      .csvm-mapping-success {\n        background: #d4edda;\n        border: 1px solid #c3e6cb;\n        color: #155724;\n      }\n      .csvm-mapping-error {\n        background: #f8d7da;\n        border: 1px solid #f5c6cb;\n        color: #721c24;\n      }\n      .csvm-validation-messages {\n        background: #f8d7da;\n        border: 1px solid #f5c6cb;\n        color: #721c24;\n      }\n      .csvm-validation-error {\n        padding: 4px 0;\n      }\n      .csvm-table select option.required:not(:disabled) {\n        font-weight: bold;\n        color: #721c24;\n      }\n      .csvm-multiple-mappings {\n        font-size: 0.85em;\n        color: #007cba;\n        font-weight: normal;\n        margin-left: 8px;\n      }\n\n      /* Dark theme */\n      @media (prefers-color-scheme: dark) {\n        .csvm-card {\n          border: 1px solid #444;\n          background: #1e1e1e;\n        }\n        .csvm-card-h {\n          background: #2d2d2d;\n          border-bottom: 1px solid #444;\n          color: #e0e0e0;\n        }\n        .csvm-table {\n          background: #1e1e1e;\n        }\n        .csvm-table th, .csvm-table td {\n          border-bottom: 1px solid #444;\n          color: #e0e0e0;\n        }\n        .csvm-table th {\n          background: #2d2d2d;\n        }\n        .csvm-table select {\n          border: 1px solid #555;\n          background: #2d2d2d;\n          color: #e0e0e0;\n        }\n        .csvm-table select.csvm-multi-select {\n          min-height: 80px;\n        }\n        .csvm-table select:focus {\n          border-color: #007cba;\n          outline: none;\n        }\n        .csvm-tag {\n          background: #0099e6;\n        }\n        .csvm-note {\n          background: #2d2d2d;\n          border: 1px solid #444;\n          color: #a0a0a0;\n        }\n        .csvm-mapping-success {\n          background: #1e3a1e;\n          border: 1px solid #2d5a2d;\n          color: #4caf50;\n        }\n        .csvm-mapping-error {\n          background: #3a1e1e;\n          border: 1px solid #5a2d2d;\n          color: #f44336;\n        }\n        .csvm-validation-messages {\n          background: #3a1e1e;\n          border: 1px solid #5a2d2d;\n          color: #f44336;\n        }\n        .csvm-table select option.required:not(:disabled) {\n          color: #f44336;\n        }\n        .csvm-multiple-mappings {\n          color: #0099e6;\n        }\n      }\n    ",document.head.appendChild(t)}}class m{parseCSV(e,{headers:t=!0,separator:n="",enclosure:s="",escape:i="",guessMaxLines:r=25}={}){const a={header:!1,skipEmptyLines:!0,dynamicTyping:!1};n&&(a.delimiter=n),s&&(a.quoteChar=s),i&&(a.escapeChar=i);const o=u.parse(e,a);o.errors.length>0&&console.warn("PapaParse errors:",o.errors);const l=o.data;for(;l.length>0&&l[l.length-1].every(e=>""===e);)l.pop();if(0===l.length)return{headers:[],rows:[],rawRows:[],dialect:{separator:n||",",enclosure:s||'"',escape:i||null}};const d={separator:o.meta.delimiter||n||",",enclosure:s||'"',escape:i||null};if(t){const e=l.shift()||[],t=l.map(t=>Object.fromEntries(e.map((e,n)=>[e,t[n]??""])));return{headers:e,rows:t,rawRows:l,dialect:d}}const h=l.reduce((e,t)=>Math.max(e,t.length),0),p=Array.from({length:h},(e,t)=>`Column ${t+1}`),c=l.map(e=>Object.fromEntries(p.map((t,n)=>[t,e[n]??""])));return{headers:p,rows:c,rawRows:l,dialect:d}}detectDialect(e,{separator:t=null,enclosure:n=null,escape:s=null,guessMaxLines:i=25}={}){let r=e;if(i>0){r=e.split(/\r\n|\n|\r/).slice(0,i).join("\n")}const a={header:!1,preview:5,skipEmptyLines:!0};t&&(a.delimiter=t),n&&(a.quoteChar=n),s&&(a.escapeChar=s);return{separator:u.parse(r,a).meta.delimiter||t||",",enclosure:n||'"',escape:s||null}}toCsvRow(e,t=",",n='"',s=null){const i={delimiter:t,quoteChar:n,header:!1};return s&&(i.escapeChar=s),u.unparse([e.map(e=>String(e??""))],i)}_parseWithDialect(e,t,n,s){const i={header:!1,delimiter:t,quoteChar:n,skipEmptyLines:!0,dynamicTyping:!1};s&&(i.escapeChar=s);return u.parse(e,i).data}_getSampleText(e,t){if(t<=0)return e;return e.split(/\r\n|\n|\r/).slice(0,t).join("\n")}_mode(e){const t=new Map;let n=null,s=-1;for(const i of e){const e=(t.get(i)||0)+1;t.set(i,e),e>s&&(n=i,s=e)}return n}_escRe(e){return e.replace(/[.*+?^${}()|[\]\\]/g,e=>`\\${e}`)}}class v extends EventTarget{constructor(e,t={}){if(super(),this.input=null,this.columns=[],this.controlsEl=null,this.mapping={},this.headers=[],this.dialect={separator:",",enclosure:'"',escape:null},this.uiRenderer=new g,this.parser=new m,this.isValid=!0,this.csv=null,"string"==typeof e){const t=document.querySelector(e);if(!(t instanceof HTMLInputElement))throw new Error("CsvMapper: first argument must be a file input, selector or options object.");e=t}if(e instanceof HTMLInputElement){if(this.input=e,"file"!==this.input.type)throw new Error("CsvMapper: first argument must be a file input, selector or options object.")}else{if("object"!=typeof e||e instanceof HTMLElement)throw new Error("CsvMapper: first argument must be a file input, selector or options object.");t=e}this.opts=Object.assign({separator:"",enclosure:"",escape:"",guessMaxLines:25,headers:!0,remap:!0,showUserControls:!!this.input,mappingInput:null,controlsContainer:null,columns:[],autoThreshold:.8,allowUnmappedTargets:!0,setInputValidity:!1,uiRenderer:null,mappingMode:"configToCsv",allowMultipleSelection:!1,allowMultiple:!1},t||{}),this.parser=this.opts.parser||new m,this.setColumns(this.opts.columns),this.controlsEl=this._resolveNode(this.opts.controlsContainer||null)||this._autoinsertContainer(),this.setUiRenderer(this.opts.uiRenderer),this.transformer=new c(this.opts.output??{}),this.transformer.addEventListener("transformationFail",e=>{const t=new CustomEvent("transformationFail",e);return this.dispatchEvent(t)}),this.transformer.addEventListener("validationFail",e=>{const t=new CustomEvent("validationFail",e);return this.dispatchEvent(t)}),this._onFileChange=this._onFileChange.bind(this),this.input&&this.input.addEventListener("change",this._onFileChange)}destroy(){this.input&&this.input.removeEventListener("change",this._onFileChange),this.controlsEl&&"1"===this.controlsEl.dataset.csvMapperAutocreated&&this.controlsEl.remove(),this.uiRenderer.destroy()}getMapping(){return Object.assign({},this.mapping)}setMapping(e){this.mapping={},e&&Object.entries(e).forEach(([e,t])=>{"string"==typeof t?t&&this.addMapping(e,t):t.forEach(t=>{t&&this.addMapping(e,t)})}),this._onMappingChange()}getHeaders(){return[...this.headers]}getRawRows(){return this.csv?Array.from(this.csv).map(e=>{const t={};for(let n=0;n<this.headers.length;n++)t[this.headers[n]]=e.get(n)||"";return t}):[]}getDialect(){return Object.assign({},this.dialect)}redraw(){this.getMappedResult()}setColumns(e=[]){this.columns=e.map(e=>"string"==typeof e?{name:e}:Object.assign({},e)),this.columns.forEach(e=>{e.title||(e.title=e.name)})}resetColumnMapping(){this.mapping={},this._onMappingChange()}addColumnMappings(e){e.forEach(({csvHeader:e,configColumn:t})=>{this.addMapping(e,t)}),this._onMappingChange()}addColumnMapping(e,t){this.addMapping(e,t),this._onMappingChange()}removeColumnMapping(e,t){this.removeMapping(e,t),this._onMappingChange()}clearColumnMapping(e){this.clearMapping(e),this._onMappingChange()}getColumnMappings(e){return this.getMappedColumns(e)}getAllMappings(){const e={};return this.headers.forEach(t=>{e[t]=this.getMappedColumns(t)}),e}setUiRenderer(e){this.uiRenderer=this._resolveUiRenderer(e)}setCsv(e){this._beforeParseCsv(e);const t=this.parser.parseCSV(e,{headers:this.opts.headers,separator:this.opts.separator,enclosure:this.opts.enclosure,escape:this.opts.escape,guessMaxLines:this.opts.guessMaxLines});return this._afterParseCsv(t),this.csv=new p(t.rawRows,t.headers),this.headers=t.headers,this.dialect=t.dialect,this}mapCsv(e){return void 0!==e&&this.setCsv(e),this.csv?(this._autoMap(),this.opts.showUserControls&&this._renderControls(),this.getMappedResult()??!1):(a("No csv"),!1)}getMappedResult(){this.isValid=!0,this._renderControls();const e=new CustomEvent("beforeMap",{detail:{csv:this.csv}});this.dispatchEvent(e);if(this._validateMapping().isValid){const{data:e,csv:t,validation:n}=this._produceOutput(),s=new CustomEvent("afterMap",{detail:{rows:e.rows,csv:t}});this.dispatchEvent(s);const i=this._resolveNode(this.opts.mappingInput||null);return i instanceof HTMLInputElement&&(i.value=JSON.stringify(this.mapping)),this._renderControls(n),{data:e,csv:t,validation:n}}}_resolveUiRenderer(e){return(e="string"==typeof e?new g:e||new g).onMappingChange((e,t)=>{if(a(`Mapping changed for ${e} to ${t}`),!t&&e.includes("|")){const[t,n]=e.split("|");this.removeMapping(t,n)}else t?this.opts.allowMultipleSelection?this.addMapping(e,t):(this.clearMapping(e),this.mapping[e]=t):this.clearMapping(e);return o(this.mapping),this._onMappingChange(),this.mapping}),e}async _onFileChange(){if(this.isValid=!0,this.csv=null,this.uiRenderer.reset(),this.input){const e=this.input.files&&this.input.files[0];if(!e)return;const t={detail:{text:await e.text()}},n=new CustomEvent("afterRead",t);this.dispatchEvent(n),this.mapping={},this.mapCsv(t.detail.text)}}_beforeParseCsv(e){this.dispatchEvent(new CustomEvent("beforeParseCsv",{detail:{csv:e}}))}_afterParseCsv(e){this.dispatchEvent(new CustomEvent("afterParseCsv",{detail:{csv:e}}))}_autoMap(){f.map(this.headers,this.columns,this.opts.mappingMode,this.opts.autoThreshold||.8,this.mapping),this._mappingChangeEvent()}_validateMapping(){const{isValid:e,mappedTargets:t,missingRequired:n}=this.validateRequiredColumns();if(this.isValid=e,!1===e){const e=new CustomEvent("mappingFailed",{detail:{isValid:this.isValid,mappedTargets:t,mapping:this.mapping,missingRequired:n}});this.dispatchEvent(e)}else{const e=new CustomEvent("mappingSuccess",{detail:{isValid:this.isValid,mappedTargets:t,mapping:this.mapping}});this.dispatchEvent(e)}if(this.opts.setInputValidity&&this.input){if(e)this.input.setCustomValidity("");else{const e=`Missing required columns: ${n.join(", ")}`;this.input.setCustomValidity(e)}this.input.reportValidity()}return{isValid:e,mappedTargets:t,missingRequired:n}}_onMappingChange(){this.isValid=!0,this._mappingChangeEvent(),this.getMappedResult()}_mappingChangeEvent(){const e=new CustomEvent("mappingChange",{detail:{mapping:this.mapping}});this.dispatchEvent(e)}validateRequiredColumns(){const e=[],t=this.getAllMappedTargets(),n=new Set(t);for(const t of this.columns)t.required&&void 0===t.defaultValue&&!n.has(t.name)&&e.push(t.name);return{isValid:0===e.length,missingRequired:e,mappedTargets:t}}addMapping(e,t){const n=this.mapping[e];n?"string"==typeof n?n!==t&&(this.mapping[e]=[n,t]):n.includes(t)||n.push(t):this.mapping[e]=t}removeMapping(e,t){const n=this.mapping[e];if(n)if("string"==typeof n)n===t&&delete this.mapping[e];else{const s=n.indexOf(t);s>-1&&(n.splice(s,1),0===n.length?delete this.mapping[e]:1===n.length&&(this.mapping[e]=n[0]))}}clearMapping(e){delete this.mapping[e]}getMappedColumns(e){const t=this.mapping[e];return t?"string"==typeof t?[t]:[...t]:[]}getAllMappedTargets(){const e=new Set;return Object.values(this.mapping).forEach(t=>{"string"==typeof t?e.add(t):t.forEach(t=>e.add(t))}),Array.from(e)}getSimpleMapping(){const e={};return Object.entries(this.mapping).forEach(([t,n])=>{"string"==typeof n?e[t]=n:n.length>0&&(e[t]=n[0])}),e}getReverseMapping(){const e={};return Object.entries(this.mapping).forEach(([t,n])=>{"string"==typeof n?e[n]=t:n.length>0&&n.forEach(n=>{e[n]=t})}),e}_produceOutput(){const e=this.validateRequiredColumns();if(!e.isValid)throw new Error(`Required columns are not mapped: ${e.missingRequired.join(", ")}`);const t=this.csv??new p,n=this.transformer.transform(t,this.mapping,this.columns),s=n.data,i=n.validation,r=n.csv;if(i.totalErrors>0){const e=new CustomEvent("validationFailed",{detail:{...n}});if(this.dispatchEvent(e),this.isValid=!1,this.input){const e=i.errors,t=e.length>1;let n=`There ${t?"were":"was"} ${e.length} total validation/transformation error${t?"s":""} across ${i.errorRows} ${i.errorRows>1?"rows":"row"}:\n`+e.slice(0,5).map(e=>`Row ${e.rowIndex} [${e.field}] {${((e,t,n="...")=>e.length<=t?e:e.slice(0,t-n.length)+n)(String(e.value),20)}}`).join("\n");e.length>5&&(n+="\n...and "+(e.length-5)+" more errors"),this.opts.setInputValidity&&(this.input.setCustomValidity(n),this.input.reportValidity())}}else{const e=new CustomEvent("validationSuccess",{detail:{...n}});this.dispatchEvent(e),this.opts.setInputValidity&&this.input&&(this.input.setCustomValidity(""),this.input.reportValidity())}return{data:s,csv:r,validation:i}}_renderControls(e={errors:[],totalRows:0,errorRows:0,totalErrors:0,errorsByField:{}}){if(!this.controlsEl||!this.opts.showUserControls)return;if(!this.headers.length)return void this.uiRenderer.showMessage?.("No CSV loaded. Choose a file to begin.");const t=this._getMappingStatus(),n=this.opts.mappingMode||"csvToConfig",s="configToCsv"===n?this.getReverseMapping():this.getSimpleMapping(),i={headers:this.headers,columnSpecs:this.columns,currentMapping:s,fullMapping:this.mapping,mappingResult:t,validation:e,rowCount:this.csv?.length||0,dialect:this.dialect,mappingMode:n,allowMultipleSelection:this.opts.allowMultipleSelection};this.uiRenderer.render(this.controlsEl,i)}_getMappingStatus(){const e=this.columns.filter(e=>!0===e.required),t=this.getAllMappedTargets(),n=new Set(t),s=e.filter(e=>!n.has(e.name));return{isValid:0===s.length,missingRequired:s.map(e=>e.title||e.name),mappedColumns:t}}_banner(e){return`<div class="csvm-note">${v.escape(e)}</div>`}_resolveNode(e){return e?"string"==typeof e?document.querySelector(e):e:null}_autoinsertContainer(){if(!this.opts.showUserControls||!this.input)return null;const e=document.createElement("div");return e.dataset.csvMapperAutocreated="1",this.input.insertAdjacentElement("afterend",e),e}static parseCSV(e,t={}){return(new m).parseCSV(e,t)}static detectDialect(e,t={}){return(new m).detectDialect(e,t)}static toCsvRow(e,t=",",n='"',s=null){return(new m).toCsvRow(e,t,n,s)}static _validateValue(e,t){if("string"==typeof t&&(t={type:t}),t instanceof RegExp)return v._validateRegex(e,t);if("function"==typeof t)return!!t(e);if(t&&"object"==typeof t){const n=t.type;if(["date","time","datetime"].includes(n)){let s=/^\d{2,4}([./-])\d{2}\1\d{2,4} \d{2}([.:])\d{2}\2\d{2}$/;switch(n){case"date":s=/^\d{2,4}([./-])\d{2}\1\d{2,4}$/;break;case"time":s=/^\d{2}([.:])\d{2}\1\d{2}$/}const i=t.format??null;return null!==i&&(s=v.dateFormatToRegex(i)),v._validateRegex(e,s)}if(["tel","telephone","phone"].includes(n)){const t=/^[\d\s()+-]+$/;return v._validateRegex(e,t)}if("email"===n){const t=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return v._validateRegex(e,t)}if("number"===n){const n=Number(String(e).replace(",","."));return!Number.isNaN(n)&&(!(null!=t.min&&n<t.min)&&!(null!=t.max&&n>t.max))}if("boolean"===n){const t=String(e).trim().toLowerCase();return["1","0","true","false","yes","no","y","n",""].includes(t)}}throw console.error("Invalid validation type given",t),new Error("Invalid validation type given")}static dateFormatToRegex(e,{anchors:t=!0,allowUppercaseMD:n=!0}={}){const s=e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");switch(e.toLowerCase()){case"iso8601":return/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24\:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/;case"rfc822":return/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(?:0?[1-9]|[12]\d|3[01])\s(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(?:\d{2}|\d{4})\s(?:[01]\d|2[0-3]):[0-5]\d(?::[0-5]\d)?\s(?:[+-](?:[01]\d|2[0-3])[0-5]\d|UT|GMT|[ECMP][SD]T|[A-IK-Z])$/i;case"rfc850":return/^(Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday),\s(0[1-9]|[12]\d|3[01])-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-\d{2}\s([01]\d|2[0-3]):[0-5]\d:[0-5]\d\sGMT$/i;case"rfc1036":return/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s(?:0?[1-9]|[12]\d|3[01])\s(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s\d{2}\s(?:[01]\d|2[0-3]):[0-5]\d:[0-5]\d\s(?:GMT|[PMCE][SD]T|[+-](?:[01]\d|2[0-3])[0-5]\d)$/i;case"rfc1123":return/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s(0[1-9]|[12]\d|3[01])\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s\d{4}\s([01]\d|2[0-3]):[0-5]\d:[0-5]\d\s(?:GMT|UT|[+-](?:[01]\d|2[0-3])[0-5]\d)$/i;case"rfc7231":return/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s(0[1-9]|[12]\d|3[01])\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s\d{4}\s([01]\d|2[0-3]):[0-5]\d:[0-5]\d\sGMT$/i;case"rfc2822":return/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(0?[1-9]|[12]\d|3[01])\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s\d{4}\s([01]\d|2[0-3]):[0-5]\d(?::[0-5]\d)?\s(?:[+-](?:[01]\d|2[0-3])[0-5]\d|UT|GMT|[ECMP][SD]T|[A-IK-Z])$/i;case"w3c":return/^\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01])T([01]\d|2[0-3]):[0-5]\d:[0-5]\d(?:\.\d+)?(?:Z|[+-](?:[01]\d|2[0-3]):[0-5]\d)$/}const i={X:"[-+]\\d{4}\\d*",Y:"-?\\d{4}\\d*",y:"-?\\d+",F:"(?:(?i)January|February|March|April|May|June|July|August|September|October|November|December)",M:"(?:(?i)Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)",m:"(?:0[1-9]|1[0-2])",n:"(?:[1-9]|1[0-2])",l:"(?:(?i)Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday)",D:"(?:(?i)Mon|Tue|Wed|Thu|Fri|Sat|Sun)",d:"(?:0[1-9]|[12]\\d|3[01])",j:"(?:[1-9]|[12]\\d|3[01])",S:"(?:(?i)st|nd|rd|th)",a:"(am|pm)",A:"(AM|PM)",h:"(?:[0][0-9]|1[0-2])",H:"(?:[01]\\d|2[0-3])",g:"(?:\\d|1[0-2])",G:"(?:\\d|1\\d|2[0-3])",i:"[0-5]\\d",s:"[0-5]\\d",U:"\\d+"};n&&(i.M=i.m,i.D=i.d);let r="";for(let t=0;t<e.length;t++){const n=e[t];"\\"!==n?r+=i[n]||s(n):(t++,t<e.length&&(r+=s(e[t])))}return new RegExp((t?"^":"")+r+(t?"$":""))}static _validateRegex(e,t){return t.test(String(e))}static escape(e){return String(null==e?"":e).replace(/[&<>"']/g,e=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}[e]||e))}}return v.DefaultUIRenderer=g,v});
//# sourceMappingURL=csv-mapper.umd.min.js.map
